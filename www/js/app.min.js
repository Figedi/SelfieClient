!function e(a,r,t){function i(n,c){if(!r[n]){if(!a[n]){var u="function"==typeof require&&require;if(!c&&u)return u(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var f=r[n]={exports:{}};a[n][0].call(f.exports,function(e){var r=a[n][1][e];return i(r?r:e)},f,f.exports,e,a,r,t)}return r[n].exports}for(var o="function"==typeof require&&require,n=0;n<t.length;n++)i(t[n]);return i}({1:[function(e){"use strict";var a,r,t,i,o,n;t=e("./config/static.coffee"),n=e("./factories/cordova_ready.coffee"),r=e("./factories/camera_data.coffee"),o=e("./directives/camera.coffee"),i=e("./controllers/main_ctrl.coffee"),a=angular.module("selfieApp",["onsen.directives"]),a.config(["$sceDelegateProvider",function(e){return e.resourceUrlWhitelist(["self",/^\s*(blob|https?):|data:image\//])}]),a.constant("Config",t.config),a.factory("cordovaReady",n.cordovaReady),a.factory("cameraData",r.cameraData),a.directive("camera",o.camera),a.directive("usermedia",o.usermedia),a.controller("MainCtrl",i.MainCtrl)},{"./config/static.coffee":2,"./controllers/main_ctrl.coffee":3,"./directives/camera.coffee":4,"./factories/camera_data.coffee":5,"./factories/cordova_ready.coffee":6}],2:[function(e,a,r){var t;t={serverIP:"http://localhost:3000",imageSrc:"img/selfie.png",base64Regex:/^(?:data\:[^,]+,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,phonegap:{CameraDefaults:{PictureSourceType:{PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},DestinationType:{DATA_URL:0,FILE_URI:1,NATIVE_URI:2},EncodingType:{JPEG:0,PNG:1},MediaType:{PICTURE:0,VIDEO:1,ALLMEDIA:2},Direction:{BACK:0,FRONT:1}}}},t.phonegap.defaultOptions={quality:50,destinationType:t.phonegap.CameraDefaults.DestinationType.FILE_URL,sourceType:t.phonegap.CameraDefaults.PictureSourceType.CAMERA,encodingType:t.phonegap.CameraDefaults.EncodingType.JPEG,cameraDirection:t.phonegap.CameraDefaults.Direction.FRONT},r.config=t},{}],3:[function(e,a,r){"use strict";e("../config/static"),r.MainCtrl=["$scope","$http","Config",function(e,a,r){var t;return t=function(){return r.base64Regex.test(e.imageSrc)},e.imageSrc=r.imageSrc,e.videoStream="",e.imageAvailable=!1,e.onUploadClick=function(){return console.log("scope.imageSrc",e.imageSrc),t()?a.post(""+r.serverIP+"/upload",{b64:e.imageSrc}).success(function(){return console.log("it works")}).error(function(){return console.log("it doesnt work")}):console.log("no b64 image")},e.onDestroyClick=function(){return e.imageSrc=r.imageSrc,e.imageAvailable=!1}}]},{"../config/static":2}],4:[function(e,a,r){"use strict";e("../config/static"),e("../factories/cordova_ready"),e("../factories/camera_data"),r.camera=["cordovaReady","Config","cameraData",function(e,a,r){var t,i,o,n,c;return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t=function(e,a){return{video:{mandatory:{minWidth:e,maxWidth:e,minHeight:a,maxHeight:a}},audio:!1}},c=function(e){return function(a){return r.videoStream=a,r.videoBlob=URL.createObjectURL(a),e.videoStream=URL.createObjectURL(a),e.$apply(),r.videoRequested=!1}},n=function(t){return function(n){return console.log("err usermedia",n),r.videoRequested=!1,navigator.camera?e.ready().then(function(){return navigator.camera.getPicture(o(t),i,a.phonegap.defaultOptions)}):(console.log("no phonegap or usermedia available",a.imageSrc),t.imageSrc=a.imageSrc,t.imageAvailable=!1,t.$apply())}},o=function(e){return function(a){return e.imageAvailable=!0,e.imageSrc=a,e.$apply()}},i=function(e){return console.log("err phonegap",e),scope.imageSrc=a.imageSrc,scope.imageAvailable=!1,scope.$apply()},{restrict:"A",link:function(e,a){return a.on("click",function(){var i,o,u,f;if(!r.videoRequested)return r.videoRequested=!0,f=[a[0].width,a[0].height],o=f[0],i=f[1],u=document.querySelector("video"),u.setAttribute("width",o),u.setAttribute("height",i),navigator.getUserMedia(t(o,i),c(e),n(e))})}}}],r.usermedia=["Config","cameraData",function(e,a){var r,t,i;return r=document.createElement("canvas"),t=r.getContext("2d"),i=function(e){var a,i,o;return o=[e.width,e.height],i=o[0],a=o[1],r.width=i,r.height=a,t.drawImage(e,0,0,i,a),r.toDataURL("image/png")},{restrict:"A",link:function(e,r){return r.on("click",function(){return e.imageSrc=i(r[0]),r[0].pause(),a.videoStream&&(a.videoStream.stop(),a.videoStream=null),e.videoStream=null,e.imageAvailable=!0,e.$apply(),a.videoRequested=!1})}}}]},{"../config/static":2,"../factories/camera_data":5,"../factories/cordova_ready":6}],5:[function(e,a,r){r.cameraData=[function(){return{}}]},{}],6:[function(e,a,r){r.cordovaReady=["$q","$rootScope","$document",function(e,a,r){var t;return t=e.defer(),r.bind("deviceready",function(){return a.$apply(t.resolve)}),{ready:function(){return t.promise}}}]},{}]},{},[1]);