!function e(t,r,a){function o(i,c){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return o(r?r:e)},u,u.exports,e,t,r,a)}return r[i].exports}for(var n="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e){"use strict";var t,r,a,o,n,i,c,s;i=e("./config/static.coffee"),c=e("./factories/cordova_ready.coffee"),o=e("./factories/camera_data.coffee"),s=e("./factories/overlay.coffee"),a=e("./directives/camera_API.coffee"),n=e("./directives/canvas_screenshot.coffee"),t=e("./controllers/main_ctrl.coffee"),r=angular.module("selfieApp",["ngTouch","ng.picturefill"]),r.config(["$sceDelegateProvider",function(e){return e.resourceUrlWhitelist(["self",/^\s*(blob|https?):|data:image\//])}]),r.constant("Config",i),r.factory("cordovaReady",c),r.factory("cameraData",o),r.factory("overlay",s),r.directive("camera",a),r.directive("usermedia",n),r.controller("MainCtrl",t)},{"./config/static.coffee":2,"./controllers/main_ctrl.coffee":3,"./directives/camera_API.coffee":4,"./directives/canvas_screenshot.coffee":5,"./factories/camera_data.coffee":6,"./factories/cordova_ready.coffee":7,"./factories/overlay.coffee":8}],2:[function(e,t){var r;r={serverIP:"http://141.83.80.129",imageSrc:"img/selfie.png",base64Regex:/^(?:data\:[^,]+,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,phonegap:{CameraDefaults:{PictureSourceType:{PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},DestinationType:{DATA_URL:0,FILE_URI:1,NATIVE_URI:2},EncodingType:{JPEG:0,PNG:1},MediaType:{PICTURE:0,VIDEO:1,ALLMEDIA:2},Direction:{BACK:0,FRONT:1}}}},r.phonegap.defaultOptions={quality:50,destinationType:r.phonegap.CameraDefaults.DestinationType.DATA_URL,sourceType:r.phonegap.CameraDefaults.PictureSourceType.CAMERA,encodingType:r.phonegap.CameraDefaults.EncodingType.JPEG,cameraDirection:r.phonegap.CameraDefaults.Direction.FRONT},t.exports=r},{}],3:[function(e,t){"use strict";var r;e("../config/static"),e("../factories/overlay"),r=["$scope","$http","Config","overlay",function(e,t,r,a){var o,n;return n=function(){return r.base64Regex.test(e.imageSrc)},o=1,e.imageSrc=r.imageSrc,e.videoStream="",e.imageAvailable=!1,e.uploadRequested=!1,e.onUploadClick=function(){var o;if(!e.uploadRequested)return n()?(e.uploadRequested=!0,o={method:"POST",timeout:2e4,url:""+r.serverIP+"/upload",data:{b64:e.imageSrc}},t(o).success(function(){return a.show("Upload erfolgreich!"),e.uploadRequested=!1}).error(function(){return e.uploadRequested=!1,a.show({text:"Upload fehlgeschlagen, versuch's doch nochmal!",type:"error"})})):a.show({text:"Kein Selfie gefunden! :(",type:"error"})},e.onDestroyClick=function(){return e.imageSrc=r.imageSrc,e.imageAvailable=!1}}],t.exports=r},{"../config/static":2,"../factories/overlay":8}],4:[function(e,t){"use strict";var r;e("../config/static"),e("../factories/cordova_ready"),e("../factories/camera_data"),e("../factories/overlay"),r=["cordovaReady","Config","cameraData","overlay",function(e,t,r,a){var o,n,i,c,s,u,f;return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,i=function(e,t){return{video:{mandatory:{minWidth:e,maxWidth:e,minHeight:t,maxHeight:t}},audio:!1}},n=function(e,t){var r,a,o,n;return n=[e[0].width,e[0].height],a=n[0],r=n[1],o=document.querySelector("video"),o.setAttribute("width",a),o.setAttribute("height",r),navigator.getUserMedia(i(a,r),f(t),u(t))},f=function(e){return function(t){return console.log("success"),r.videoStream=t,r.videoBlob=URL.createObjectURL(t),e.videoStream=URL.createObjectURL(t),e.$apply(),r.videoRequested=!1}},u=function(e){return function(n){return console.log("err usermedia",n),r.videoRequested=!1,navigator.camera?o(e):(a.show({type:"error",text:"Keine Kamera verfÃ¼gbar"}),e.imageSrc=t.imageSrc,e.imageAvailable=!1,e.$apply())}},o=function(r){return e.ready().then(function(){return navigator.camera.getPicture(s(r),c,t.phonegap.defaultOptions)})},s=function(t){return function(r){return console.log("success phonegap"),t.imageAvailable=!0,t.imageSrc="data:image/png;base64,"+r,t.$apply(),e.ready().then(function(){return navigator.camera.cleanup(function(){},function(){})})}},c=function(){return toast.show({type:"error",text:"Kamerafehler :("}),scope.imageSrc=t.imageSrc,scope.imageAvailable=!1,scope.$apply()},{restrict:"A",link:function(e,t){return t.on("click",function(){return r.videoRequested||e.uploadRequested?void 0:(e.imageAvailable=!1,navigator.getUserMedia?(r.videoRequested=!0,n(t.find("img"),e)):o(e))})}}}],t.exports=r},{"../config/static":2,"../factories/camera_data":6,"../factories/cordova_ready":7,"../factories/overlay":8}],5:[function(e,t){"use strict";var r;e("../config/static"),e("../factories/camera_data"),r=["Config","cameraData",function(e,t){var r,a,o;return r=document.createElement("canvas"),a=r.getContext("2d"),o=function(e){var t,o,n;return n=[e.width,e.height],o=n[0],t=n[1],r.width=o,r.height=t,a.drawImage(e,0,0,o,t),r.toDataURL("image/png")},{restrict:"A",link:function(e,r){return r.on("click",function(){return e.imageSrc=o(r[0]),r[0].pause(),t.videoStream&&(t.videoStream.stop(),t.videoStream=null),e.imageAvailable=!0,e.videoStream=null,e.imageAvailable=!0,e.$apply(),t.videoRequested=!1})}}}],t.exports=r},{"../config/static":2,"../factories/camera_data":6}],6:[function(e,t){t.exports=[function(){return{}}]},{}],7:[function(e,t){var r;r=["$q","$rootScope","$document",function(e,t,r){var a;return a=e.defer(),r.bind("deviceready",function(){return t.$apply(a.resolve)}),{ready:function(){return a.promise}}}],t.exports=r},{}],8:[function(e,t){var r;r=["$timeout","$rootScope","$rootElement","$compile","$window",function(e,t,r,a){var o,n,i,c,s;return o={SUCCESS_CLASS:"fa fa-check fa-5x",ERROR_CLASS:"fa fa-times fa-5x"},n={duration:5e3,type:"success",text:"Success!",$scope:t.$new()},c=null,s=function(t,a){var o;return console.log("rootelement",r[0]),(o=document.querySelector(".toast"))&&o.remove(),a.addClass("toast-show"),r.append(a),c&&e.cancel(c),c=e(function(){return a.removeClass("toast-show").addClass("toast-hide"),c=null},t)},i=function(e){var t,r,n,i;return i="success"===e.type?o.SUCCESS_CLASS:o.ERROR_CLASS,n='<div class="toast '+e.type+'">\n  <i class="'+i+'"></i>\n  <span>'+e.text+"</span>\n</div>",t=e.$scope,r=a(n)(t),s(e.duration,r)},{show:function(e){return"string"==typeof e&&(e={text:e}),e=angular.extend(n,e),i(e)}}}],t.exports=r},{}]},{},[1]);